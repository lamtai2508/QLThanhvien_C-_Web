@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewBag.Title = "BookingHistory";
}
@model List<QLThanhvien_Web.Models.Reservation>

<div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>Quản Lý</h2>
            <div class="user-info">
                <div class="user-avatar">N</div>
                <div class="user-name">Nguyễn Văn A</div>
            </div>
        </div>
        <div class="sidebar-menu">
            <div class="menu-item" onclick="window.location.href='/Member/Profile'">
                <i>👤</i> Thông tin cá nhân
            </div>
            <div class="menu-item" onclick="window.location.href='/Booking/Booking_device'">
                <i>📅</i> Đặt chỗ thiết bị
            </div>
            <div class="menu-item active">
                <i>📚</i> Lịch sử đặt chỗ
            </div>
            <div class="menu-item" onclick="window.location.href='/Violation/Violations_history'">
                <i>⚠️</i> Lịch sử vi phạm
            </div>
            <div class="menu-item" onclick="window.location.href='/Login/Login'">
                <i>🔚</i> Đăng xuất
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <h1>Lịch Sử Đặt Chỗ</h1>
            <div class="search-bar">
                <input type="text" placeholder="Tìm kiếm...">
                <button>🔍</button>
            </div>
        </div>

        <!-- Booking History -->
        <div class="content-section">
            <div class="section-header">
                <h2>Lịch sử đặt chỗ</h2>
                <div>
                    <select id="status-filter">
                        <option value="all">Tất cả trạng thái</option>
                        <option value="approved">Đã duyệt</option>
                        <option value="pending">Đang chờ</option>
                        <option value="rejected">Từ chối</option>
                    </select>
                </div>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Thiết bị</th>
                        <th>Ngày đặt</th>
                        <th>Thời gian đặt</th>
                        <th>Thời gian trả</th>
                        <th>Trạng thái</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                @foreach (var res in Model)
                {
                    <tbody>
                        <tr>
                            <td>@res.reservation_id</td>
                            <td>@res.device_id</td>
                            <td>@res.reservation_date</td>
                            <td>@res.borrowed_date</td>
                            <td>@res.returned_date</td>
                            <td><span class="status approved">@res.status</span></td>
                            <td><button class="btn btn-secondary">Chi tiết</button></td>
                        </tr>
                    </tbody>
                }
            </table>
        </div>

            <!-- Booking Details (Hidden by default, would be shown when clicking "Chi tiết") -->
            <div class="content-section" id="booking-details" style="display: none;">
                <div class="section-header">
                    <h2>Chi tiết đặt chỗ</h2>
                    <button onclick="document.getElementById('booking-details').style.display = 'none'">Đóng</button>
                </div>
                <div class="user-profile">
                    <div class="profile-info">
                        <div class="info-group">
                            <label>ID đặt chỗ</label>
                            <p>B001</p>
                        </div>
                        <div class="info-group">
                            <label>Thiết bị</label>
                            <p>Máy chiếu</p>
                        </div>
                        <div class="info-group">
                            <label>Ngày đặt</label>
                            <p>15/04/2023</p>
                        </div>
                        <div class="info-group">
                            <label>Thời gian</label>
                            <p>09:00 - 11:00</p>
                        </div>
                    </div>
                    <div class="profile-info">
                        <div class="info-group">
                            <label>Trạng thái</label>
                            <p><span class="status approved">Đã duyệt</span></p>
                        </div>
                        <div class="info-group">
                            <label>Mục đích sử dụng</label>
                            <p>Họp dự án ABC</p>
                        </div>
                        <div class="info-group">
                            <label>Địa điểm</label>
                            <p>Phòng họp tầng 3</p>
                        </div>
                        <div class="info-group">
                            <label>Ghi chú</label>
                            <p>Cần chuẩn bị màn hình và loa</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mã JavaScript để hiển thị chi tiết khi nhấn nút "Chi tiết"
        document.querySelectorAll('.btn-secondary').forEach(button => {
            button.addEventListener('click', function() {
                document.getElementById('booking-details').style.display = 'block';
            });
        });
    </script>
